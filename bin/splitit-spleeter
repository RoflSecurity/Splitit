#!/bin/sh
# bin/splitit-spleeter
# Lance Spleeter via pipx sur Termux

# Vérifie si pipx est installé
if ! command -v pipx >/dev/null 2>&1; then
  echo "⚠️ pipx non trouvé. Installation..."
  pkg install python -y
  python3 -m pip install --user pipx
  python3 -m pipx ensurepath
  export PATH="$PATH:$HOME/.local/bin"
fi

# Vérifie si spleeter est installé via pipx
if ! pipx list | grep -q spleeter; then
  echo "⚠️ Spleeter non installé. Installation via pipx..."
  pipx install spleeter
fi

# Exécute Spleeter avec tous les arguments passés
pipx run spleeter "$@"
